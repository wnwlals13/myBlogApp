{"ast":null,"code":"var _jsxFileName = \"/Users/joojimin/Desktop/jimin/project/blogApp/src/components/content_edit/content_edit.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Navbar from \"../../utils/navbar/navbar\";\nimport Editor from \"../editor/editor\";\nimport styles from \"./content_edit.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ContentEdit = ({\n  contents,\n  authService,\n  dbService,\n  FileInput\n}) => {\n  _s();\n  var _history$location, _history$location$sta;\n  const titleRef = useRef();\n  // const [mainText, setMainText] = useState(\"\");\n  const [updateFile, setUpdateFile] = useState({\n    fileName: null,\n    fileURL: null\n  });\n  console.log(contents);\n  const history = useHistory();\n  const {\n    fileName,\n    fileURL,\n    id,\n    mainContents,\n    title,\n    uploadDate,\n    userId,\n    name,\n    email\n  } = history === null || history === void 0 ? void 0 : (_history$location = history.location) === null || _history$location === void 0 ? void 0 : (_history$location$sta = _history$location.state) === null || _history$location$sta === void 0 ? void 0 : _history$location$sta.article;\n  const goToMain = () => {\n    history.push({\n      pathname: \"/\",\n      state: {\n        id: id || null,\n        name: name || null,\n        email: email || null\n        // contentId: contents.id ? contents.id : null,\n      }\n    });\n  };\n  const reviseContent = update => {\n    // setContents(update);\n    dbService.updateContent(update.userId, update);\n    goToMain();\n  };\n  const onUpload = event => {\n    event.preventDefault();\n    const update = {\n      id: id,\n      uploadDate: uploadDate,\n      updateDate: getFormatDate(new Date()) || \"\",\n      userId: userId,\n      title: titleRef.current.value,\n      mainContents: \"\",\n      fileName: fileName,\n      fileURL: fileURL\n    };\n    reviseContent({\n      ...update\n    });\n  };\n  const onKeyUp = event => {\n    event.preventDefault();\n    // reviseContent({\n    //   ...contents,\n    //   [event.currentTarget.name]: event.currentTarget.value,\n    // });\n  };\n  const onFileChange = file => {\n    file && setUpdateFile({\n      fileName: file.name,\n      fileURL: file.url\n    });\n  };\n  const onChangeField = data => {\n    // data && setMainText(data.content);\n    console.log(data.content);\n  };\n  useEffect(() => {\n    // reviseContent({ ...contents, updateFile });\n    console.log();\n  }, [updateFile]);\n  const getFormatDate = date => {\n    var year = date.getFullYear();\n    var month = 1 + date.getMonth();\n    month = month >= 10 ? month : \"0\" + month;\n    var day = date.getDate();\n    day = day >= 10 ? day : \"0\" + day;\n    return year + \"-\" + month + \"-\" + day;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.editContainer,\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      authService: authService,\n      dbService: dbService\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: styles.inputContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"title\",\n        ref: titleRef,\n        defaultValue: title || \"\",\n        className: `${styles.title} ${styles.data}`,\n        placeholder: \"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694.\",\n        onKeyUp: onKeyUp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.fileInput,\n        children: /*#__PURE__*/_jsxDEV(FileInput, {\n          name: updateFile.fileName !== null ? updateFile.fileName : fileName,\n          onFileChange: onFileChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.mainContents,\n        children: /*#__PURE__*/_jsxDEV(Editor, {\n          mainContents: mainContents,\n          onChangeField: onChangeField\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.uploadBtn,\n        onClick: onUpload,\n        children: \"\\uC218\\uC815\\uD558\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n_s(ContentEdit, \"0IjlzLOugMeloETWJ+/PBxt6HHc=\", false, function () {\n  return [useHistory];\n});\n_c = ContentEdit;\nexport default ContentEdit;\nvar _c;\n$RefreshReg$(_c, \"ContentEdit\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useHistory","Navbar","Editor","styles","jsxDEV","_jsxDEV","ContentEdit","contents","authService","dbService","FileInput","_s","_history$location","_history$location$sta","titleRef","updateFile","setUpdateFile","fileName","fileURL","console","log","history","id","mainContents","title","uploadDate","userId","name","email","location","state","article","goToMain","push","pathname","reviseContent","update","updateContent","onUpload","event","preventDefault","updateDate","getFormatDate","Date","current","value","onKeyUp","onFileChange","file","url","onChangeField","data","content","date","year","getFullYear","month","getMonth","day","getDate","className","editContainer","children","_jsxFileName","lineNumber","columnNumber","inputContainer","type","ref","defaultValue","placeholder","fileInput","uploadBtn","onClick","_c","$RefreshReg$"],"sources":["/Users/joojimin/Desktop/jimin/project/blogApp/src/components/content_edit/content_edit.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Navbar from \"../../utils/navbar/navbar\";\nimport Editor from \"../editor/editor\";\nimport styles from \"./content_edit.module.css\";\n\nconst ContentEdit = ({ contents, authService, dbService, FileInput }) => {\n  const titleRef = useRef();\n  // const [mainText, setMainText] = useState(\"\");\n  const [updateFile, setUpdateFile] = useState({\n    fileName: null,\n    fileURL: null,\n  });\n  console.log(contents);\n  const history = useHistory();\n  const {\n    fileName,\n    fileURL,\n    id,\n    mainContents,\n    title,\n    uploadDate,\n    userId,\n    name,\n    email,\n  } = history?.location?.state?.article;\n  const goToMain = () => {\n    history.push({\n      pathname: \"/\",\n      state: {\n        id: id || null,\n        name: name || null,\n        email: email || null,\n        // contentId: contents.id ? contents.id : null,\n      },\n    });\n  };\n  const reviseContent = (update) => {\n    // setContents(update);\n    dbService.updateContent(update.userId, update);\n    goToMain();\n  };\n\n  const onUpload = (event) => {\n    event.preventDefault();\n    const update = {\n      id: id,\n      uploadDate: uploadDate,\n      updateDate: getFormatDate(new Date()) || \"\",\n      userId: userId,\n      title: titleRef.current.value,\n      mainContents: \"\",\n      fileName: fileName,\n      fileURL: fileURL,\n    };\n    reviseContent({\n      ...update,\n    });\n  };\n  const onKeyUp = (event) => {\n    event.preventDefault();\n    // reviseContent({\n    //   ...contents,\n    //   [event.currentTarget.name]: event.currentTarget.value,\n    // });\n  };\n  const onFileChange = (file) => {\n    file && setUpdateFile({ fileName: file.name, fileURL: file.url });\n  };\n  const onChangeField = (data) => {\n    // data && setMainText(data.content);\n    console.log(data.content);\n  };\n  useEffect(() => {\n    // reviseContent({ ...contents, updateFile });\n    console.log();\n  }, [updateFile]);\n  const getFormatDate = (date) => {\n    var year = date.getFullYear();\n    var month = 1 + date.getMonth();\n    month = month >= 10 ? month : \"0\" + month;\n    var day = date.getDate();\n    day = day >= 10 ? day : \"0\" + day;\n    return year + \"-\" + month + \"-\" + day;\n  };\n\n  return (\n    <div className={styles.editContainer}>\n      <Navbar authService={authService} dbService={dbService} />\n      <form className={styles.inputContainer}>\n        <input\n          type=\"text\"\n          name=\"title\"\n          ref={titleRef}\n          defaultValue={title || \"\"}\n          className={`${styles.title} ${styles.data}`}\n          placeholder=\"제목을 입력하세요.\"\n          onKeyUp={onKeyUp}\n        />\n\n        <div className={styles.fileInput}>\n          <FileInput\n            name={updateFile.fileName !== null ? updateFile.fileName : fileName}\n            onFileChange={onFileChange}\n          />\n        </div>\n        <div className={styles.mainContents}>\n          <Editor mainContents={mainContents} onChangeField={onChangeField} />\n        </div>\n        {/* <div className={`${styles.hashTag__container} ${styles.data}`}>\n        <Hashtag hashtag={hashtag} onTagChange={onTagChange} />\n      </div> */}\n        <button className={styles.uploadBtn} onClick={onUpload}>\n          수정하기\n        </button>\n      </form>\n    </div>\n  );\n};\nexport default ContentEdit;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}